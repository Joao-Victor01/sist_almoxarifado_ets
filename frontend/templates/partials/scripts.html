<!-- frontend\templates\partials\scripts.html -->
<!-- Scripts JS obrigatÃ³rios -->
<script src="/static/js/bootstrap.bundle.min.js"></script>
<script src="/static/js/validar-acesso.js"></script>

<!-- Scripts de cada funcionalidade -->
<script src="/static/js/listar-itens.js"></script>
<script src="/static/js/listar-categorias.js"></script>
<script src="/static/js/listar-retiradas.js"></script>
<script src="/static/js/cadastrar-item.js"></script>
<script src="/static/js/cadastrar-categorias.js"></script>

<!-- InicializaÃ§Ã£o da dashboard -->
<script>
  document.addEventListener('DOMContentLoaded', initPage);

  function initPage() {
    const main = document.getElementById('main-content');
    const defaultHTML = main.innerHTML;

    document.getElementById('home-button').addEventListener('click', e => {
      e.preventDefault();
      main.innerHTML = defaultHTML;
      initBindings();
    });

    initBindings();
  }

  function initBindings() {
    bindQuickAccess();
    bindLogout();
  }

  function bindQuickAccess() {
    const modalItem = new bootstrap.Modal(document.getElementById('modalCadastrarItem'));
    document.querySelectorAll('#btn-open-cadastrar-item').forEach(btn => {
      btn.addEventListener('click', e => {
        e.preventDefault(); modalItem.show();
      });
    });
    document.getElementById('listar-item-link')?.addEventListener('click', e => { e.preventDefault(); renderizarListaItens(); });
    document.getElementById('listar-item-link-quick')?.addEventListener('click', e => { e.preventDefault(); renderizarListaItens(); });

    const modalCat = new bootstrap.Modal(document.getElementById('modalCadastrarCategoria'));
    document.getElementById('btn-open-cadastrar-categoria')?.addEventListener('click', e => { e.preventDefault(); modalCat.show(); });
    document.getElementById('listar-categoria-link')?.addEventListener('click', e => { e.preventDefault(); renderizarCategorias(); });
    document.getElementById('listar-categoria-link-quick')?.addEventListener('click', e => { e.preventDefault(); renderizarCategorias(); });

    // Adicionar handlers para Retiradas (Navbar e Quick Access)
    document.getElementById('listar-retiradas-link')?.addEventListener('click', e => {
      e.preventDefault(); 
      window.currentPage = 1; 
      window.renderRetiradas('/paginated'); // ðŸ‘ˆ Usa a funÃ§Ã£o global
    });

    document.getElementById('listar-retiradas-pendentes-link')?.addEventListener('click', e => {
      e.preventDefault(); 
      window.currentPage = 1; 
      window.renderRetiradas('/pendentes/paginated');
    });

    document.getElementById('listar-retiradas-pendentes-quick')?.addEventListener('click', e => {
      e.preventDefault(); 
      window.currentPage = 1; 
      window.renderRetiradas('/pendentes/paginated');
    });
  }

  function bindLogout() {
    document.getElementById('logout-link')?.addEventListener('click', e => {
      e.preventDefault(); logout();
    });
  }
</script>
</body>
</html>